## Hireplans Application Features

### Current Features:
1. User authentication and registration system
2. Job listings and job details pages
3. Candidate profile management (basic layout)
4. Employer management system
5. Job application system
6. Google Calendar integration
7. Email verification system
8. Reference system with feedback
9. Meeting scheduling functionality
10. Task management system
11. Admin dashboard with Orchid platform

### Feature Updates Log:
- Initial system setup with basic candidate, employer, and job management functionality
- Updated candidate profile page with modern 2-column layout (Jan 2024):
  * Left sidebar (1/3 width): Unified card containing profile, contact info, and basic details
  * Right content area (2/3 width): Experience, skills, languages, documents, notes sections
  * Modern card-based design with Bootstrap components and icons
  * Responsive design for mobile and desktop using Bootstrap grid system
  * Professional styling similar to LinkedIn profile layout
  * Clickable email (mailto) and phone (tel) links for better usability
  * Removed redundant Actions section (actions available in top command bar)
  * Moved profile header into sidebar for more integrated layout
  * Combined sidebar sections into one unified card for cleaner design
  * Converted from Tailwind CSS to Bootstrap classes with proper responsive layout
  * Replaced SVG icons with Bootstrap Icons for consistency
  * Converted entire page to Livewire component for better maintainability
  * Interactive skills and languages management using Livewire:
    - Add new skills/languages with compact, well-sized input field and button layout
    - Delete existing skills/languages with black X button on each badge (better visibility)
    - Real-time updates without page reload using Livewire
    - Duplicate prevention and validation
    - Enter key support for quick adding
    - Enhanced UI with proper button spacing (ms-1 gap), consistent sizing, and centered icons
    - Compact input groups with max-width constraint (350px) for better visual balance
    - Auto-focus on input fields for better UX
    - No JavaScript required - all handled by Livewire
  * Unified document display logic with edit page:
    - CV and other document links now use same data structure and rendering as edit screen
    - Consistent document handling across view and edit pages using HelperFunc::renderAttachmentsLinks
    - Proper clickable links with target="_blank" for document downloads
    - Unified attachment display with icons and proper formatting
  * Comprehensive Activity Logging System (Jan 2024):
    - Created activities database table with proper schema for timeline tracking
    - Built Activity model with type constants, relationships, and helper methods
    - Developed ActivityService for easy logging across the application
    - Added "Show Activity" button below left sidebar (full-width button with activity icon)
    - Toggle between normal profile view and activity timeline view
    - Dynamic button styling (outline when inactive, filled when active)
    - Real activity timeline display with:
      * Chronological order (most recent first)
      * Color-coded activity icons and badges
      * Rich activity descriptions with metadata
      * Clickable links to related jobs, applications, meetings
      * Activity types: profile created/updated, job applied, status changed, meetings, notes, documents
      * User attribution showing who performed each action
      * Timestamps for all activities
    - Add custom notes functionality:
      * "Add Note" button in activity view
      * Textarea input with validation and keyboard shortcuts (Ctrl+Enter)
      * Notes appear in timeline with chat icon and user attribution
    - Integrated activity logging into existing events:
      * Profile creation and updates
      * Document uploads (CV and other documents)
      * Job applications - logged when candidates apply for positions
      * Job application status changes - logged from job pipeline when recruiters update status
      * Meeting scheduling - logged when meetings are created from schedule page
      * Meeting updates - logged when meeting details are modified
      * Meeting status changes - logged when meetings are marked as completed or status changed
      * Automatic activity generation for all candidate interactions
    - Job Pipeline Integration:
      * Status changes in job pipeline automatically create activity logs
      * Activities include old status, new status, job details, and who made the change
      * Timeline shows complete application journey from application to final decision
    - Meeting Management Integration:
      * Meeting creation from schedule page automatically logs activity (both Livewire and Orchid ScheduleScreen)
      * Meeting updates and status changes create timeline entries (Orchid admin interface)
      * Activities include meeting details, job context, and scheduling information
      * Special handling for meeting completion with detailed metadata
      * Enhanced error handling and logging for troubleshooting activity creation
      * Improved candidate profile links in schedule page (no new window opening)
      * Clickable candidate names in schedule view link directly to candidate profiles
      * Activity logging integrated into Orchid ScheduleScreen for create/update/status change operations
      * Fixed meeting edit modal JavaScript compatibility issue in Orchid admin interface
      * Resolved "Illegal invocation" and "loadMeetingData is not defined" JavaScript errors  
      * Implemented proper Orchid modal pattern using async data loading and ModalToggle
      * Replaced custom JavaScript with Orchid's built-in async modal functionality  
      * Added asyncGetMeeting method for proper async modal data loading with ->async() method
      * Used ->asyncParameters() to pass meeting ID to async modal handler
      * Fixed "Cannot access offset of type string on string" error by returning proper array structure from asyncGetMeeting
      * Ensured meeting data is returned as individual field values matching form field expectations
      * Removed custom JavaScript in favor of Orchid's native modal system
      * Enhanced activity timeline with custom-styled action links using modern CSS
      * Replaced Bootstrap button classes with elegant custom `.activity-link` styles
      * Added hover effects, subtle animations, and color-coded job/application links
      * Improved visual hierarchy and user experience in candidate activity timeline
      * Replaced all native heading tags (h1-h6) with Bootstrap typography classes to prevent CSS conflicts
      * Used fw-bold fs-5 for section titles, fw-medium fs-6 for subsections, preventing global style overrides
      * Enhanced typography consistency across the entire candidate profile page
      * Added professional profile image section with circular avatar display
      * Integrated UI Avatars service for automatic fallback profile images
      * Added email verification badge overlay on profile image for visual verification status
      * Displays candidate name, job title, and company prominently under profile image
      * Added comprehensive Job Applications section displaying application history
      * Shows job title, company, application status with color-coded badges and icons
      * Displays application date, job location, and cover letter preview
      * Status-specific icons (send, eye, people, check-circle, x-circle) for visual clarity
      * Includes direct links to view full application details
      * Handles empty state with helpful messaging when no applications exist
      * Fixed status display by properly mapping JobApplicationStatus enum values to labels
      * Added enum casting to JobApplication model for proper status handling
      * Status badges now correctly show: Applied, Longlist, Shortlist, Screening, Interviewing, Hired, Rejected
      * Enhanced status logic with proper enum instance checking and fallback handling
      * Fixed cover letter display to show downloadable file link instead of raw text content
      * Cover letter now appears as clickable download button with file icon and original filename
      * Added proper error handling for missing cover letter files
      * Enhanced job application entries with clickable links to application details
      * Job titles now link to platform.job_application.view route for detailed application viewing
      * Added visual indicator icon (arrow-up-right-square) for linked job titles
      * **Email Marketing Outreach System (Jan 2025):**
        - Created comprehensive email marketing campaign management system
        - Built EmailCampaign model with status tracking (draft, sent, scheduled)
        - Implemented CampaignUser pivot model for tracking email delivery status (updated from CampaignCandidate)
                 - **Moved to Orchid Admin Platform (Jan 2025 Update):**
           - Integrated Outreach functionality into Orchid admin dashboard
           - Created OutreachScreen for campaign listing with sorting and filtering (clean table view)
           - Built OutreachEditScreen for creating/editing campaigns with form validation
           - Developed OutreachViewScreen for viewing campaign details and statistics
           - Added proper breadcrumb navigation and Orchid UI components
           - Implemented campaign management with draft/send functionality
           - Added Outreach menu item to Orchid admin navigation
           - Removed from regular website navigation for better admin integration
           - **Updated Architecture (Jan 2025):**
             - Separated concerns: listing, creation, editing, and viewing on separate screens
             - Clean table-based listing with actions dropdown
             - Dedicated create/edit form screen for better user experience
             - Proper navigation flow between screens
             - **User Relationship Update (Jan 2025):**
               - Changed from candidates to users (1:1 relationship)
               - Updated EmailCampaign model to use users() relationship instead of candidates()
               - Modified all screens to work with User model instead of Candidate model
               - Campaigns now target users directly for email marketing
               - Maintains same functionality but with proper user-based targeting
             - **User Association Fix (Jan 2025):**
               - Fixed critical issue where selected users were not being saved to campaigns
               - Updated OutreachEditScreen query() method to properly load existing users when editing
               - Added users()->sync() calls in both saveAsDraft() and sendCampaign() methods
               - Now properly saves and edits user associations for email marketing campaigns
               - Users are correctly stored in campaign_users pivot table with status tracking
             - **Email Sending Implementation (Jan 2025):**
               - Created CampaignMail mailable class following Laravel best practices (similar to ReferenceRequestMail)
               - Implemented SendCampaignJob for queued email processing with retry logic and error handling
               - Added email template with proper HTML content rendering
               - Integrated job dispatching into sendCampaign() method for scalable email delivery
               - Campaign users are initialized as 'pending' status before email sending
               - Individual job per user allows for granular tracking and error handling
               - Failed emails are logged and marked with error messages for debugging
               - Email status tracking: pending → sent/failed with timestamps and error details
               - Queue-based processing prevents timeouts for large recipient lists
             - **Activity Timeline Integration (Jan 2025):**
               - Added three new activity types: campaign_sent, campaign_delivered, campaign_failed
               - Campaign activities appear in candidate timelines with proper icons and colors:
                 * campaign_sent (bi-send, primary): When campaign is queued for candidate
                 * campaign_delivered (bi-send-check, success): When email successfully delivered
                 * campaign_failed (bi-send-x, danger): When email delivery fails
               - Activities include campaign metadata (ID, name, title) and error details for failures
               - Campaign activities are only logged for users who have candidate profiles
               - Complete audit trail of email marketing interactions in candidate timelines
               - Links to campaigns preserved in activity metadata for future reference
             - **Rich Text Editor Integration (Jan 2025):**
               - Replaced plain TextArea with Quill WYSIWYG editor for email content creation
               - Users can now format emails with rich text styling, bold, italic, lists, links, and more
               - Professional email composition interface similar to modern email clients
               - HTML output automatically generated from rich text formatting
               - Enhanced user experience for creating visually appealing marketing campaigns
               - Consistent with Orchid platform's rich text editing capabilities
            - **Variable Replacement System (Jan 2025):**
              - Added dynamic variable replacement in email campaigns for personalized messaging
              - Support for {{variable}} syntax in both email subject and content
              - Available variables include:
                * Basic user data: {{name}}, {{first_name}}, {{email}}, {{phone}}, {{city}}, {{country}}, {{nationality}}
                * Candidate-specific data (if profile exists): {{current_company}}, {{job_title}}, {{candidate_ref}}
              - Automatic replacement during email sending with user-specific data
              - Frontend helper showing all available variables with descriptions
              - Graceful handling of missing data with empty string fallbacks
              - Support for extracting first name from full name for more natural personalization
        - Used consistent styling patterns: Bootstrap classes with Tailwind utilities, proper form validation
        - Implemented responsive design with modal forms and table layouts
        - Added proper error handling and success messages for user feedback
  * **Document Parsing and Auto-Population System (Jan 2025):**
    - Created comprehensive document parsing service for candidate data extraction from CV/Resume files
    - Built DocumentParsingService with intelligent text extraction and pattern matching:
      * PDF parsing using Spatie/PDF-to-Text library for text extraction
      * DOCX/DOC parsing using PhpOffice/PhpWord library for structured document reading
      * Smart pattern recognition for common CV sections (Experience, Skills, Contact Info)
      * Regex-based field extraction for names, emails, phones, companies, job titles
      * Automatic gender normalization and data cleaning with validation
      * Context-aware parsing for different CV formats and layouts
    - Integrated document import functionality into Orchid candidate creation form:
      * Document upload field accepts PDF, DOCX, DOC files for new candidate creation
      * "Parse Document" button in command bar triggers automatic text extraction and form population
      * Session-based data transfer to populate all form fields after parsing
      * Real-time document processing with comprehensive error handling
      * User feedback with success/error messages and extracted data preview
    - Enhanced candidate creation workflow:
      * Upload CV/Resume (PDF/DOCX) → Parse Document → Review populated fields → Save candidate
      * Parsed CV is automatically saved as attachment when candidate is created (no cleanup/deletion)
      * Form validation integration with extracted data
      * Preserves existing form functionality while adding document parsing convenience
    - Supported document field extraction:
      * Personal info: name (multiple patterns), email, phone (various formats), city, country, nationality, date of birth
      * Professional info: current company, job title, work experience summary
      * Skills and languages: section-based extraction with multiple separator support
      * Gender information when available in documents
      * Flexible pattern matching for different CV formats and structures
    - **LLM-Enhanced Data Extraction (Jan 2025):**
      * Integrated AI-powered document parsing for superior accuracy
      * Primary: Groq API with Llama 3.1 70B for intelligent data extraction
      * Fallback: Regex-based parsing when LLM is unavailable
      * Smart context understanding for CV sections and data relationships
      * Structured JSON response format for consistent data formatting
      * Configurable via GROQ_API_KEY environment variable
      * Dramatically improved accuracy over pure regex pattern matching
    - **Enhanced Skills Field (Jan 2025):**
      * Upgraded skills database column from VARCHAR(255) to TEXT for unlimited length
      * Changed form field from single-line input to multi-line textarea (4 rows)
      * Updated help text to include language teaching skills examples
      * Better accommodation of comprehensive skill lists from LLM parsing
    - **Enhanced Candidate Form Fields (Oct 2025):**
      * Removed address and postcode fields from user profile form for cleaner interface
      * Added work_experiences field to capture brief summary of professional background
      * Updated PDF parsing to extract nationality, date of birth, and work experiences
      * Enhanced LLM prompts to include new field extraction (nationality, DOB, work summary)
      * Added regex fallback patterns for new fields with proper date format conversion
      * Database migration added work_experiences TEXT column to candidates table
      * All parsing methods now extract comprehensive candidate profile data
      * **CV Retention After Parsing:** Parsed CV documents are now automatically saved as CV attachments instead of being deleted, preserving the original document for future reference
      * **Visual CV Display:** Parsed documents now appear in the "Existing CVs" section of the form, allowing users to see the uploaded CV immediately after parsing
      * **Database Constraint Fix:** Fixed SQLSTATE[23000] integrity constraint violation by ensuring all candidate fields use empty strings instead of null values, preventing database insertion errors
      * **CV Profile Display Fix:** Fixed issue where parsed CVs weren't appearing on candidate profile pages by enabling Upload field value population in CandidateAttachmentLayout
      * **Secure Password Setup System (Oct 2025):**
        - Replaced manual password entry with secure email-based password setup for new users
        - Added checkbox option "Send password setup email to user" for new candidate creation
        - Users receive professional email with secure link to set their own password (60-minute expiration)
        - Leverages Laravel's built-in password reset token system for security
        - Existing user editing still supports manual password changes
        - Created PasswordSetupController, PasswordSetupMail, and associated routes/views
        - Enhanced user experience with branded email template and secure setup flow
        - Automatic email verification upon password setup completion
      * **Alpine.js Navigation Fix (Oct 2025):**
        - Fixed "Alpine.navigate is not a function" errors on logout and navigation
        - Resolved multiple Alpine.js instances conflict between Livewire and custom scripts
        - Removed navigate: true parameters from Livewire components to prevent JavaScript conflicts
        - Cleaned up Alpine.js initialization to work properly with Livewire's built-in Alpine instance
        - Ensured stable logout functionality and navigation throughout the application
      * **Job Application Email Notifications (Oct 2025):**
        - Added automatic email notifications to cv@hireplans.com when users apply for jobs
        - Created JobApplicationNotificationMail with comprehensive application details
        - Professional email template includes candidate info, job details, skills, and CV status
        - Queued email processing for reliable delivery without blocking application submission
        - Includes direct links to view full application and candidate profile in admin panel
        - Robust error handling ensures application submission succeeds even if email fails
        - Complete application summary with formatted candidate and employer information
      * **Unified Email Template System (Oct 2025):**
        - Created consistent, professional email template system based on password-setup design
        - Built reusable base email layout (emails/layouts/base.blade.php) with brand styling
        - Standardized all emails with consistent header, footer, typography, and brand colors
        - Responsive design with mobile-friendly layouts and proper grid systems
        - Comprehensive styling classes: info-box, warning-box, success-box, action-buttons, etc.
        - Updated all existing emails to use the unified template:
          * Password setup emails (secure account creation)
          * Job application notifications (cv@hireplans.com alerts)
          * Reference request emails (professional feedback requests)
          * Email marketing campaigns (branded messaging)
        - Improved professional appearance and brand consistency across all communications
        - Easier maintenance with centralized styling and reusable components
      * **Google Tasks Integration Fix (Oct 2025):**
        - Fixed "missing required redirect URI" error in GoogleTasksService
        - Corrected configuration key mismatch: changed from redirect_uri to redirect to match services.php config
        - Added comprehensive validation for Google configuration (client_id, client_secret, redirect_uri)
        - Enhanced error messages to guide users to set missing environment variables
        - Required environment variables: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, GOOGLE_REDIRECT_URL
        - Fixed CORS error by preventing Orchid.js from intercepting OAuth redirects as AJAX requests
        - Added data-turbo="false" and target="_self" to Google OAuth link in tasks-component.blade.php
        - Redirect URL should match dashboard prefix: http://localhost:8000/portal/tasks/google-callback (for portal prefix)
        - Ensures proper Google OAuth authentication flow for Google Tasks and Calendar integration
      * **User Profile CV Parser Integration (Oct 2025):**
        - Extended existing CV parsing functionality to user profile edit page (UserProfileScreen)
        - Added "Parse CV" button in command bar that appears when user has uploaded CV attachments
        - Integrated DocumentParsingService and LlmParsingService for AI-enhanced data extraction
        - Automatic form population with parsed CV data (only fills empty fields, preserves existing data)
        - Session-based data transfer between parsing and form rendering for seamless UX
        - Comprehensive error handling with user feedback via Toast messages
        - Supports PDF, DOCX, and DOC file formats with intelligent text extraction
        - Parses personal info, professional details, skills, and work experience from CVs
        - Smart field mapping between parsed data and candidate profile form fields
        - Uses most recent CV attachment when multiple CVs are uploaded
        - Leverages existing CV attachment functionality without breaking current workflows
  * **Website Redesign with Component-Based Architecture (Jan 2025):**
    - Implemented complete redesign of the homepage using modern HTML template from hireplans-sites folder
    - Created comprehensive set of reusable Blade components for consistent design system:
      * hero-section: Enhanced search form with job role, location, and work type filters
      * trust-stats: Company statistics display (20+ years experience, Gulf region focus, etc.)
      * mission-section: Professional company description and values
      * featured-jobs: Job listings display with sample data and customizable job arrays
      * categories-section: Job category browsing with hover effects and job counts
      * how-it-works: Step-by-step process for both job seekers and employers
      * testimonials-section: Customer testimonials with professional card layout
      * cta-band: Call-to-action section with customizable buttons and messaging
      * site-header: Professional navigation header with authentication integration
      * site-footer: Comprehensive footer with links, social media, and contact info
    - Enhanced Livewire HomePage component with multi-field search functionality:
      * Added searchQuery, location, and workType properties for comprehensive job search
      * Implemented searchJobs() method to handle form submission and redirect with query parameters
      * Maintains backward compatibility with existing /jobs/listings route structure
    - Created dedicated home-layout.blade.php for optimized home page experience:
      * Professional typography using Inter font family matching design template
      * Brand color system with golden theme (--brand-gold: #F4C542, --brand-gold-600: #D4A017)
      * Bootstrap integration with custom styling for consistent component appearance
      * SEO-optimized meta tags including Open Graph and Twitter Card support
      * Accessibility features including skip links and proper ARIA labels
    - Preserved existing functionality while upgrading visual design:
      * Maintained job search redirection to /jobs/listings with query parameters
      * Kept authentication integration and user state management
      * Preserved responsive design for mobile and desktop compatibility
    - Component-based architecture for maximum reusability:
      * All sections are now modular Blade components with customizable props
      * Easy to maintain and update individual sections without affecting others
      * Consistent styling patterns using Bootstrap classes with Tailwind utilities
      * Professional hover effects and animations for enhanced user experience
    - **Header and Footer CSS Fix (Jan 2025):**
      * Fixed missing header and footer styles that were causing display issues
      * Added proper logo sizing (40px mobile, 50px desktop) to prevent oversized images
      * Implemented mobile hamburger navigation with smooth animations
      * Added professional footer styling with organized column layout and social icons
      * Fixed responsive design breakpoints for mobile, tablet, and desktop views
      * Scoped all styles to .home-layout class to prevent conflicts with Orchid admin
      * Added proper hover effects, transitions, and professional styling throughout
      * Added cursor pointer to featured job cards for better UX indicating clickable elements
    - **Mobile Menu Z-Index Fix (Jan 2025):**
      * Fixed z-index conflicts where logo was overlapping the mobile hamburger menu sidebar
      * Corrected gray appearance issue in mobile menu background
      * Proper layering: hamburger button (z-index: 1002), mobile menu (z-index: 1001), backdrop (z-index: 1000), logo (z-index: 100)
      * Enhanced mobile menu styling with professional white background and proper hover effects
      * Added smooth transitions and proper shadow effects for better user experience
      * Mobile navigation now displays correctly on all devices without visual conflicts
      * Added smooth coordinated animations with 0.3s fade-in backdrop that complements sidebar slide-in
      * Backdrop covers only main content area (left side) while keeping sidebar area clear and professional
      * Perfect spacing using `right: 280px` positioning to prevent any overlap with sidebar menu
      * Clean X close button without background styling for modern, minimal appearance
      * Removed hover background effects when menu is in X state for cleaner interaction
      * Fixed X symmetry by using 4px translate values with transform-origin: center for perfectly balanced diagonal lines
    - **Anchor Link Scroll Offset Fix (Jan 2025):**
      * Fixed sticky header covering content when clicking anchor navigation links
      * Added scroll-padding-top: 90px to .home-layout for modern browser support
      * Added scroll-margin-top: 90px to :target elements for older browser compatibility
      * Calculated offset accounts for header height (73px) plus comfortable padding (17px)
      * Now when users click navigation links (#about, #contact, #jobs, etc.), content appears properly below the sticky header
      * Tested and verified working across all anchor links on the homepage
    - **Unified Authentication Page Styling (Nov 2025):**
      * Created consistent authentication layout (layouts/auth.blade.php) with clean, headerless design
      * Updated all authentication pages to use unified styling: login, register, forgot-password, reset-password
      * Implemented professional auth card design with brand colors and consistent form styling
      * Added proper error handling, success messages, and form validation styling
      * Maintains responsive design with mobile-friendly layouts
      * Simplified layout with logo-only navigation - logo links back to homepage (/)
      * Professional form styling with brand golden theme (#F4C542, #D4A017) matching home page design
      * Enhanced user experience with improved typography, spacing, and visual hierarchy
      * Clean, focused authentication experience without header navigation distractions
      * Custom checkbox styling with proper background, borders, and branded checked state for better visibility
      * Warm off-white background color (#FFFBF0) for consistent, professional appearance
    - **Job Listings Page Redesign (Nov 2025):**
      * Complete redesign of job listings page using home-layout for brand consistency
      * Professional search and filters section with Bootstrap grid layout and brand styling
      * Modern job cards with hover effects, company logos, and colorful job detail badges
      * Enhanced job information display: location, salary, job type, experience level with distinct colors
      * Responsive design with proper mobile layout and Bootstrap column system
      * Improved search functionality supporting job title, company, keywords, location, and job type filtering
      * Professional typography matching home page design with proper spacing and visual hierarchy
      * Results counter showing pagination info and empty state design for no results
      * Clickable job cards with smooth hover animations and proper call-to-action buttons
      * Consistent brand colors (#F4C542, #D4A017, #FAFAFA) throughout the page
      * Integration with home page search - accepts search parameters from homepage hero section
      * Improved spacing: increased gaps between job cards, better tag spacing with flex layout, enhanced visual hierarchy
      * Custom pagination design matching brand style: card-based layout, golden hover effects, proper page numbering with ellipsis, branded current page indicator
  * **LinkedIn Search Integration (Jan 2025) - [HIDDEN/DISABLED]:**
    - Created comprehensive LinkedIn candidate search system for sourcing talent
    - Built LinkedInSearchService with real API integration support:
      * LinkedIn Official API integration (requires partner approval)
      * RapidAPI fallback services for easier access
      * Supports search by keywords, location, and job titles
      * Returns candidate profiles with detailed information (name, title, company, skills, experience)
      * Relevance scoring system for match quality assessment
      * Comprehensive profile data including education, summary, connections
    - Developed professional Orchid admin interface:
      * LinkedIn Search screen with intuitive search form and filters
      * Real-time search results display in responsive table layout
      * Profile photos, relevance badges, and skill visualization
      * Professional candidate cards with LinkedIn-style presentation
      * Search statistics and result count with performance metrics
    - Advanced candidate profile management:
      * Detailed profile viewing with experience timeline and education
      * Direct LinkedIn profile links for external verification
      * One-click candidate addition to recruitment pipeline
      * Integrated messaging system for candidate outreach
      * Skills-based filtering and location-based search refinement
    - **Currently hidden from navigation and routes** until API integration is configured
    - Ready for production LinkedIn API integration with multiple provider options
    - Follows project standards: Bootstrap styling, Orchid layouts, proper breadcrumbs
    - Comprehensive error handling and configuration guidance systems
    - **To re-enable:** Uncomment menu item in PlatformProvider and route in platform.php, then configure API credentials

### Issues Resolved:
- **Orchid Sidebar Color Issue After Deployment (Jan 2025) - SOLVED:**
  - Problem: After deployment, Orchid sidebar changed from dark theme to light theme and link colors reverted
  - Root Cause: CSS specificity and selector mismatch between custom styles and Orchid's default CSS
  - Investigation revealed:
    * Browser inspector showed `.bg-dark .nav>li>a { color: #e2e1e5; }` overriding custom styles
    * Custom CSS was targeting `.aside .nav-link.active` but Orchid uses `.bg-dark .nav>li>a` structure
    * Same CSS specificity but Orchid CSS loaded after custom CSS, causing override
  - Solution: Added higher-specificity selectors to target Orchid's actual HTML structure:
    * `.aside.bg-dark .nav > li > a` and `.bg-dark .nav > li > a.active` 
    * Ensured custom brand colors (#a16207) properly override Orchid defaults
    * Custom styles now have higher specificity and load after Orchid CSS
  - Result: Sidebar properly displays custom brand colors and maintains dark theme with golden accents

### Project Development Guidelines:
- **Frontend Framework**: Use Livewire for interactive components instead of custom JavaScript
- **Styling**: Mix Bootstrap classes with Tailwind utilities for consistent design
- **Typography**: Use Bootstrap typography classes (fw-bold fs-5, fw-medium fs-6) instead of native h1-h6 tags
- **Page Titles**: Each page should have a clear title using fw-bold fs-2 class
- **Forms**: Use Bootstrap form classes with proper validation and error handling
- **Modals**: Implement modal forms for complex interactions (create/edit forms)
- **Tables**: Use Bootstrap table classes with responsive wrappers
- **Navigation**: Add new menu items to resources/views/livewire/layout/navigation.blade.php
- **Authentication**: Protect routes with auth middleware for user-specific features
- **Database**: Create proper migrations and models with relationships
- **Validation**: Implement form validation with user-friendly error messages
- **Responsive Design**: Ensure mobile-friendly layouts with proper spacing and sizing
- **Authentication Pages**: Use layouts/auth.blade.php layout for clean, headerless design with logo-only navigation across all auth pages (login, register, forgot-password, reset-password)

## Job Details Page Redesign (Nov 2025)

**Complete modern redesign of job details page at /jobs/details/{id}**

### Layout and Structure:
- **Layout Change**: Switched from layouts.app to layouts.home-layout for consistent site branding
- **Container Layout**: Uses Bootstrap container with proper padding and responsive design
- **Background**: Matches job listings page with #FAFAFA background color
- **Card Design**: Single clean white card with rounded corners and subtle shadow

### Visual Design:
- **Header Section**: 
  * Large company logo (80x80px) or branded initial fallback
  * Prominent job title (2.25rem, weight 700)
  * Company name as subtitle (1.25rem, weight 600)
  * Professional spacing and alignment

- **Job Details Grid**:
  * 6-column responsive grid layout (col-md-6)
  * Icon-based information display with golden themed icons
  * Consistent icon containers (40x40px) with golden background tint
  * Upper-case labels with proper typography hierarchy
  * Information includes: Location, Salary, Job Type, Experience Level, Category, Posted Date

- **Job Description**:
  * Clear section separation with border-top divider
  * Professional typography with 1.7 line-height for readability
  * Proper heading hierarchy and spacing

### Navigation and Actions:
- **Back Navigation**: 
  * Top-level back link with golden hover states
  * Breadcrumb-style navigation to job listings
  * Preserves pagination state from listings page

- **Action Buttons**:
  * Primary golden gradient "Apply Now" button with hover animations
  * Secondary outlined "Back to Listings" button
  * Conditional display based on authentication and profile status
  * Proper button sizing and spacing with icons

### Color Scheme and Branding:
- **Primary Colors**: Golden theme (#F4C542, #D4A017) matching site branding
- **Text Colors**: Professional hierarchy (#0A0A0A for headings, #4B4B4B for body, #6B7280 for labels)
- **Interactive Elements**: Hover states and transitions on all clickable elements
- **Icon Design**: Bootstrap Icons with consistent golden theming

### Technical Implementation:
- **Component**: App\Livewire\Pages\Jobs\JobDetails
- **View**: resources/views/livewire/pages/jobs/job-details.blade.php
- **Layout**: Uses layouts.home-layout for consistent site header and footer
- **Responsive**: Bootstrap grid system with proper mobile optimization
- **Accessibility**: Proper heading structure, alt text, and semantic markup

### User Experience Improvements:
- **Visual Hierarchy**: Clear information prioritization and scanning patterns
- **Professional Presentation**: Corporate-level design suitable for recruitment platform
- **Consistent Navigation**: Seamless integration with job listings flow
- **Mobile Optimization**: Responsive design that works across all device sizes
- **Loading Performance**: Optimized markup and minimal custom CSS 

### Latest Updates (Nov 15, 2025):
- **Job Card Layout Enhancement**:
  * Repositioned company logo to appear on the left side of job title and employer name (desktop)
  * Logo appears on top of job title and employer name on mobile devices
  * Used responsive flexbox layout with Bootstrap classes:
    - `flex-column` on mobile (vertical stack)
    - `flex-md-row` on desktop (horizontal layout)
  * Updated text alignment for consistency:
    - `text-start` for consistent left alignment across all screen sizes
    - Removed center alignment on mobile for better consistency
   * Job tags/badges are left-aligned for consistent layout
   * Company logo height now dynamically matches content height:
     - Uses `align-self-stretch` and `min-height: 60px` with `height: auto`
     - Logo container stretches to match title + employer + tags content height
     - Maintains 60px width with flexible height for better visual balance
   * Improved visual hierarchy and readability across all device sizes
   * Maintained hover effects and professional styling

- **Search Section Flex Layout Refactor**:
  * Converted from Bootstrap grid (`row`/`col-md-*`) to pure flexbox layout
  * Replaced `col-md-4`, `col-md-3`, `col-md-2` classes with responsive flex utilities:
    - Search input: `flex-fill` with min-width 280px, max-width 320px (largest field)
    - Location and Job Type: `flex-grow-1` with min-width 200px, max-width 240px
    - Action buttons: `flex-shrink-0` with min-width 140px (fixed width)
  * Enhanced responsive behavior:
    - `d-flex flex-wrap` container with `gap-3` for consistent spacing
    - `align-items-end` to align all form elements at bottom baseline
    - Min-width constraints prevent fields from becoming too narrow
    - Max-width constraints maintain optimal proportions on larger screens
  * Improved button styling with `width: 100%` for consistent full-width appearance
  * Better responsive wrapping behavior when screen space is limited
  * Maintained all existing styling, hover effects, and functionality
  * **Enhanced Button Layout and Mobile Optimization**:
    - Separated form fields and action buttons into distinct rows for better hierarchy
    - Buttons now positioned at bottom of search section instead of baseline alignment
    - Form fields row: `d-flex flex-wrap gap-3 align-items-end mb-3`
    - Buttons row: `d-flex gap-2 justify-content-center justify-content-md-start`
    - Mobile-first design with `w-100` classes ensuring 100% width on small screens
    - Inline button layout: Search and Reset buttons positioned side by side on same row
    - Centered button alignment on mobile, left-aligned on desktop  
    - Compact button sizing with original padding for optimal space usage

- **Job Details Tiles Layout**:
  * Converted job properties from inline grid to individual tile cards
  * Each property (Location, Salary, Job Type, Experience, Category, Posted Date) has its own tile
  * Tile design features:
    - 60x60px golden gradient icon containers with larger 1.5rem icons
    - Subtle gradient background (white to light gray)
    - Rounded corners (12px border-radius) for modern appearance
    - Center-aligned content with proper spacing
    - Hover animations: translateY(-4px) with golden glow shadow
    - Golden border highlight on hover for interactive feedback
  * Responsive grid layout:
    - col-md-4 (3 tiles per row on desktop)
    - col-sm-6 (2 tiles per row on tablet)
    - Full width on mobile for optimal readability
  * Enhanced visual impact with better separation and focus on each property
  * Consistent golden branding throughout all interactive elements

- **Job Detail Tile Component Creation**:
  * Extracted tile functionality into reusable `<x-job-detail-tile>` component
  * Component props: `icon`, `label`, `value`, and optional `class`
  * Added cursor pointer styling for better UX indication
  * Improved salary formatting with `number_format()` for better readability
  * Component features:
    - Fully encapsulated styling and hover animations
    - Reusable across different contexts
    - Clean separation of concerns
    - Consistent golden branding and interactions
  * Maintained all previous styling and animations within the component
  * Simplified main template with clean component usage

## Featured Jobs Database Integration (Nov 15, 2025)

### Overview
Enhanced the homepage featured jobs section to display real job data from the database instead of static sample content, providing users with current and relevant job opportunities.

### Technical Implementation
- **HomePage Livewire Component Enhancement**:
  * Added `getFeaturedJobs()` method to fetch latest 6 active jobs from database
  * Implemented eager loading of employer relationship for optimal performance
  * Added proper data transformation to match component expectations
  * Integrated HelperFunc utility methods for consistent data formatting

- **Data Processing & Formatting**:
  * Job types formatted using `HelperFunc::getJobTypes()` for consistent display
  * Experience levels formatted using `HelperFunc::getExperienceLevels()` 
  * Salary formatting with `number_format()` and currency symbol
  * Proper fallback handling for missing data fields
  * Dynamic tag generation based on actual job properties

- **Featured Jobs Component Updates**:
  * Enhanced component to handle real database data
  * Improved null value handling for optional fields (salary, location)
  * Added validation for empty tags with appropriate fallbacks
  * Maintained backward compatibility with existing component structure

### Database Query Optimization
- **Query Strategy**:
  * Filtered for active jobs only (`is_active = true`)
  * Ordered by creation date (`latest()`) to show newest opportunities
  * Limited to 6 results for optimal page performance
  * Eager loaded employer relationship to prevent N+1 queries

### User Experience Improvements
- **Dynamic Content**: Homepage now displays current job opportunities instead of static samples
- **Consistent Branding**: Job types and experience levels use standardized terminology
- **Professional Presentation**: Proper salary formatting and clean data display
- **Real Links**: Each job card links to actual job detail pages
- **Fallback Handling**: Graceful handling of missing employer or job data

## Privacy and Terms Pages Redesign (Nov 18, 2025)

**Complete modern redesign of Privacy Policy and Terms of Use pages**

### Layout and Structure:
- **Layout Change**: Switched from layouts.app to layouts.home-layout for consistent site branding
- **Hero Section**: Added professional hero section with centered titles and descriptive subtitles
- **Container Layout**: Uses card-based content container with proper padding and responsive design
- **Background**: Matches job listings and details pages with #FAFAFA background color
- **Card Design**: Single clean white card with rounded corners (12px) and subtle shadow

### Visual Design:
- **Hero Section**:
  * Centered page title with large, bold typography (3rem)
  * Descriptive subtitle explaining page purpose
  * Professional spacing and color hierarchy (#6B7280 for subtitle)
  * Clean, minimal design matching site branding

- **Content Section**:
  * Maximum width container (900px) for optimal readability
  * White card background with border-radius and shadow
  * Professional typography with proper line-height (1.7) for easy reading
  * Color hierarchy: #0A0A0A for headings, #4B4B4B for body text

- **Typography System**:
  * Main section headers (H2): 1.75rem, bold, golden color (#D4A017) with bottom border (#F4C542)
  * Section headers (H3): 1.5rem, bold, golden color (#D4A017)
  * Subsection headers (H4): 1.25rem, semi-bold, dark color (#0A0A0A)
  * Body text: Comfortable line-height (1.7) for readability
  * Links: Golden color (#D4A017) with underline for visibility

### Content Structure:
- **Privacy Policy Page**:
  * Comprehensive sections on data collection, usage, and rights
  * Organized with clear headings and subsections
  * Proper list formatting with margin and spacing
  * Contact information with clickable email links
  * GDPR compliance information and user rights

- **Terms of Use Page**:
  * Clear sections on website usage, security, and copyright
  * User obligations and limitation of liability
  * Website availability and disclaimer information
  * Link to Privacy Policy for related information
  * Law and jurisdiction details

### Color Scheme and Branding:
- **Primary Colors**: Golden theme (#F4C542, #D4A017) matching site branding
- **Text Colors**: Professional hierarchy (#0A0A0A for headings, #4B4B4B for body, #6B7280 for subtitles)
- **Interactive Elements**: Golden underlined links for clear call-to-action
- **Section Dividers**: Golden accent border for main headings

### Technical Implementation:
- **Components**: 
  * App\Livewire\PrivacyPage (resources/views/livewire/privacy-page.blade.php)
  * App\Livewire\TermsPage (resources/views/livewire/terms-page.blade.php)
- **Layout**: Uses layouts.home-layout for consistent site header and footer
- **Routes**: Already configured in routes/web.php (/privacy-policy, /terms-of-use)
- **Footer Integration**: Links already exist in main site footer (layouts/app.blade.php)
- **Responsive**: Bootstrap-compatible design with proper mobile optimization
- **Accessibility**: Proper heading hierarchy, semantic HTML, and readable typography

### User Experience Improvements:
- **Consistent Navigation**: Seamless integration with main site navigation and footer
- **Professional Presentation**: Corporate-level design suitable for legal documentation
- **Visual Hierarchy**: Clear information prioritization and scanning patterns
- **Mobile Optimization**: Responsive design that works across all device sizes
- **Improved Readability**: Proper typography, spacing, and color contrast for long-form content
- **Brand Consistency**: Matches homepage, job listings, and job details page design

### Registration Terms Agreement (Nov 18, 2025):
- **Required Checkbox**: Added mandatory agreement checkbox to registration form
- **Legal Compliance**: Users must agree to Terms of Use and Privacy Policy before creating account
- **Linked Documents**: Direct links to both policies that open in new tabs
- **Validation**: Backend validation with 'accepted' rule ensures checkbox is checked
- **Professional Styling**: Checkbox styled with golden brand colors matching auth layout
- **User Experience**: Clear, readable text with hover effects on links
- **Error Handling**: Proper error messages if user attempts to register without agreeing
- **Implementation**: 
  * Added `agreed_to_terms` boolean property to register Livewire component
  * Added 'accepted' validation rule in register method
  * Enhanced auth layout CSS with checkbox-container and checkbox-label styles
  * Golden link colors (#D4A017) with hover effects matching site branding

## Job Posting Inquiry Modal (Nov 18, 2025)

**Interactive modal form for employers to submit job posting inquiries directly from the homepage**

### Overview:
Created a professional modal-based inquiry system allowing employers to easily request to post job openings without leaving the homepage. Submissions are sent directly to the company email for follow-up.

### Technical Implementation:
- **Livewire Component**: `App\Livewire\JobInquiryModal`
- **Mailable**: `App\Mail\JobInquiryMail`
- **Email Template**: `resources/views/emails/job-inquiry.blade.php`
- **Modal View**: `resources/views/livewire/job-inquiry-modal.blade.php`

### Features:
1. **Modal Trigger**:
   - "Post a job" button in CTA band opens modal
   - Conditional rendering based on `showModal` prop
   - Livewire event dispatch system for smooth interaction
   - Non-intrusive overlay design with backdrop

2. **Form Fields**:
   - **Email**: Contact email for follow-up (required, validated)
   - **Company**: Company name (required)
   - **Position**: Job role/position title (required)
   - **Location**: Job location (required)
   - **Details**: Detailed position description (required, max 2000 chars)

3. **Validation & Error Handling**:
   - Full Laravel validation with custom error messages
   - Real-time error display under each field
   - Required field indicators with red asterisks
   - Comprehensive backend validation rules

4. **Email Notification**:
   - Sent to `COMPANY_EMAIL` environment variable
   - Professional email template using unified layout system
   - Includes all inquiry details in organized format
   - Direct "Reply to Company" button with mailto link
   - Action required notice for timely follow-up

5. **User Experience**:
   - **Professional Design**: Matches site branding with golden theme
   - **Smooth Animation**: Fade-in overlay with centered modal
   - **Mobile Responsive**: Works perfectly on all screen sizes
   - **Click Outside to Close**: Overlay click closes modal
   - **Close Button**: Clear X button in header
   - **Success/Error Messages**: Toast-style notifications
   - **Form Reset**: Clears all fields after successful submission

### Visual Design:
- **Modal Styling**: 
  * White background with rounded corners (12px)
  * Professional shadow for depth
  * Max width 600px for optimal form layout
  * Scrollable content if needed (max-height 90vh)

- **Form Styling**:
  * Golden focus states (#F4C542) matching brand
  * Clean input fields with proper spacing
  * Textarea for detailed descriptions
  * Professional button design with hover effects

- **Header Section**:
  * Clear "Post a Job" title
  * Helpful subtitle explaining purpose
  * Close button with hover effects

- **Action Buttons**:
  * Cancel: White with gray border
  * Submit: Golden primary button
  * Proper spacing and alignment

### Email Template:
- Uses unified email layout (`emails.layouts.base`)
- Organized information display with tables
- Company information section with all details
- Position details in highlighted box
- Call-to-action button to reply
- Action required warning box

### Integration:
- **Homepage**: Modal component added to `resources/views/livewire/home-page.blade.php`
- **CTA Band**: Modified to trigger modal instead of anchor link
- **Conditional Display**: `showModal` prop controls behavior
- **Event System**: Livewire dispatch/listen pattern for communication

### User Flow:
1. User clicks "Post a job" button in CTA band
2. Modal opens with inquiry form
3. User fills in company details and position information
4. Form validates on submission
5. Email sent to company (admin@hireplans.com or COMPANY_EMAIL)
6. Success message displayed
7. Modal closes and form resets
8. Admin receives email and can reply directly

### Error Handling:
- Try-catch block for email sending
- Logs errors for debugging
- User-friendly error messages
- Validation prevents incomplete submissions
- Session flash messages for feedback

### Benefits:
- **Lead Generation**: Captures employer inquiries directly
- **Professional Appearance**: Shows commitment to customer service
- **Easy to Use**: Simple form with clear instructions
- **No Page Reload**: Smooth single-page experience
- **Mobile Friendly**: Works on all devices
- **Immediate Response**: Email notification ensures quick follow-up

## Dynamic Job Type & Location Filters (Nov 18, 2025)

**Replaced static categories with dynamic job type and location filters on homepage**

### Overview:
Transformed the homepage categories section into an interactive filter system with two rows: Job Types and Top Locations. Each filter shows real-time job counts and links directly to filtered job listings.

### Technical Implementation:
- **Component**: `app/Livewire/HomePage.php` - Added data retrieval methods
- **View Component**: `resources/views/components/categories-section.blade.php` - Two-row layout
- **Database Queries**: Real-time counting of active jobs by type and location

### Features:

1. **Job Types Row**:
   - Displays all available job types from `HelperFunc::getJobTypes()`
   - Shows real-time count of active jobs for each type
   - Types include: Full Time, Part Time, Contract, Temporary, Internship, Volunteer, Other
   - Each card links to filtered job listings: `/jobs/listings?type={job_type}`
   - Dynamic counting: only shows types with active jobs

2. **Top Locations Row**:
   - Shows top 8 locations by job count
   - Extracted from actual job data (location field)
   - Displays "City, Country" format
   - Real-time job counts per location
   - Links to location-filtered listings: `/jobs/listings?location={location}`
   - Sorted by job count (highest first)

3. **Data Methods**:
   - **`getJobTypesWithCounts()`**: Queries database for job counts by type
   - **`getTopLocations()`**: Aggregates locations with job counts using SQL GROUP BY
   - Real-time queries ensure accuracy
   - Efficient with proper indexing on is_active and location fields

### Visual Design:
- **Two-Row Layout**: Clear separation between types and locations
- **Section Headers**: "Job Types" and "Top Locations" with proper typography
- **Pill Cards**: Existing pill-card styling maintained for consistency
- **Responsive Grid**: Category-grid class ensures mobile-friendly layout
- **Hover Effects**: Interactive feedback on hover
- **Job Counts**: Dynamic count display (e.g., "5 jobs", "1 job")

### User Experience:
- **Quick Filtering**: One-click access to filtered job listings
- **Real Data**: Always shows current job availability
- **Clear Labels**: Descriptive names and accurate counts
- **Mobile Responsive**: Grid adapts to screen size
- **Fast Loading**: Efficient queries with minimal overhead
- **Fallback Content**: Default items shown if no data available

### Integration:
- **HomePage Component**: 
  * Added `jobTypes` and `locations` to render data
  * Methods called on each page load for fresh data
- **Categories Section**: 
  * Accepts `jobTypes` and `locations` props
  * Renders two separate grids
  * Maintains existing styling and structure
- **Job Listings Page**: 
  * Existing filtering system handles `type` and `location` parameters
  * Seamless integration with search functionality

### Database Queries:
```php
// Job Types with Counts
Job::where('is_active', true)
    ->where('job_type', $key)
    ->count();

// Top Locations with Counts
Job::where('is_active', true)
    ->selectRaw('location, COUNT(*) as job_count')
    ->groupBy('location')
    ->orderBy('job_count', 'desc')
    ->limit(8)
    ->get();
```

### Benefits:
- **Better User Experience**: Users can quickly find jobs by type or location
- **Dynamic Content**: Always reflects current job availability
- **Improved Navigation**: Direct filtering from homepage
- **SEO Friendly**: Clean URLs with query parameters
- **Data-Driven**: No hardcoded values, all from database
- **Performance**: Efficient queries with proper counting
- **Scalability**: Automatically adapts as jobs are added/removed

## Quil AI Meeting Notes Integration with Comprehensive Logging (Feb 2026)

**Advanced webhook integration with Quil AI for meeting transcriptions, recordings, and AI-generated summaries, featuring enterprise-grade logging and monitoring**

### Comprehensive Logging System:

#### Dedicated Log Channel:
- **Channel Name**: `quil_webhooks`
- **Log File**: `storage/logs/quil-webhooks.log`
- **Rotation**: Daily rotation with 30-day retention
- **Configuration**: `config/logging.php` - separate from main application logs
- **Purpose**: Isolated logging for debugging, monitoring, and compliance

#### Log Middleware (`LogQuilWebhookRequests`):
- **Function**: Automatic request/response logging for all webhook calls
- **Logged Information**:
  * Request ID (unique identifier for tracking)
  * Timestamp (ISO 8601 format)
  * HTTP method, URL, IP address, User Agent
  * Request headers (sanitized to remove sensitive data)
  * Payload size (actual payload logged separately)
  * Response status code and body
  * Processing time in milliseconds
  * Performance warnings for slow processing (>2000ms)

#### Enhanced Controller Logging:
**Granular step-by-step tracking throughout webhook processing:**

1. **Initial Receipt**:
   - Event ID, event type, meeting ID logged immediately
   - Marks start of processing with timestamp

2. **Validation Stage**:
   - Validation start logged
   - Success/failure with specific field errors
   - Invalid payload details in debug mode

3. **Idempotency Check**:
   - Duplicate detection logged with existing meeting details
   - Created timestamp of original processing

4. **Phone Number Matching**:
   - Participant count and phone numbers logged
   - Each matching attempt tracked with:
     * Original phone number
     * Cleaned phone number
     * Search pattern used
     * Match success/failure
   - Final match result with user details or "no match" warning

5. **Database Operations**:
   - Meeting record creation with processing status
   - Available assets logged (transcription, recording, notes count)
   - Database ID confirmation

6. **Activity Log Creation**:
   - Candidate ID and Quil meeting ID
   - Success/failure of activity creation
   - Errors caught and logged separately

7. **Completion**:
   - ✓ Success indicator for easy scanning
   - Processing time in milliseconds
   - Matched user name
   - Complete asset availability summary

8. **Error Handling**:
   - ✗ Failure indicator for easy identification
   - Error message, file, and line number
   - Stack trace in debug logs
   - Processing time even on failure

#### Log Format Features:
- **Visual Indicators**: ✓ for success, ✗ for failure
- **Structured Data**: All logs include JSON context
- **Request Correlation**: Unique request ID ties together all logs for single webhook
- **Performance Metrics**: Processing time tracked for every request
- **Security**: Sensitive headers (authorization, api-key, cookie) automatically redacted
- **Size Management**: Large payloads (>50KB) automatically truncated with metadata preserved

### Monitoring & Debugging Tools:

#### Artisan Command (`php artisan quil:logs`):
**Powerful CLI tool for viewing and monitoring webhook logs**

**Basic Usage:**
```bash
# View last 50 lines (default)
php artisan quil:logs

# View last 100 lines
php artisan quil:logs --lines=100

# Monitor logs in real-time (tail mode)
php artisan quil:logs --tail

# Filter by keyword
php artisan quil:logs --filter="error"
php artisan quil:logs --filter="matched"

# Filter by log level
php artisan quil:logs --level=error
php artisan quil:logs --level=warning

# Show only today's logs
php artisan quil:logs --today
```

**Features:**
- **Color-coded output**: Errors (red), warnings (yellow), info (green), debug (gray)
- **Summary statistics**: Total lines, successful/failed processing, duplicates, errors, warnings
- **Helpful tips**: Built-in command examples
- **Real-time monitoring**: Tail mode for live webhook monitoring
- **Smart filtering**: Keyword and log level filtering

**Command Output Example:**
```
=== QUIL WEBHOOK LOGS ===
File: storage/logs/quil-webhooks.log
Lines: 50

[2026-02-04 14:30:15] INFO: === INCOMING QUIL WEBHOOK ===
[2026-02-04 14:30:15] INFO: Starting webhook processing
[2026-02-04 14:30:15] DEBUG: Validating webhook payload
[2026-02-04 14:30:15] INFO: Payload validated successfully
[2026-02-04 14:30:15] INFO: Phone match found!
[2026-02-04 14:30:15] INFO: ✓ Webhook processing completed successfully

╔════════════════════════╦═══════╗
║ Metric                 ║ Count ║
╠════════════════════════╬═══════╣
║ Total Lines            ║ 50    ║
║ Successful Processing  ║ 5     ║
║ Failed Processing      ║ 0     ║
║ Duplicate Webhooks     ║ 1     ║
║ Errors                 ║ 0     ║
║ Warnings               ║ 3     ║
╚════════════════════════╩═══════╝
```

### Log File Structure:

**Daily Log Files:**
- `quil-webhooks-2026-02-04.log` - Today's logs
- `quil-webhooks-2026-02-03.log` - Yesterday's logs
- Automatic rotation at midnight
- 30-day retention policy

**Log Entry Structure:**
```
[timestamp] LEVEL: Message {"context": "json"}
```

**Example Log Entries:**
```
[2026-02-04 14:30:15] INFO: === INCOMING QUIL WEBHOOK === 
{"request_id":"quil_65f8a3b2c1d4e","timestamp":"2026-02-04T14:30:15+00:00","method":"POST","url":"https://example.com/webhooks/quil/meeting-completed","ip":"34.123.45.67","user_agent":"Quil-Webhook/1.0"}

[2026-02-04 14:30:15] INFO: Starting webhook processing 
{"event_id":"evt_123abc","event_type":"meeting.completed","meeting_id":"mtg_456def"}

[2026-02-04 14:30:15] INFO: Phone match found! 
{"user_id":42,"user_name":"John Doe","candidate_id":15,"matched_phone":"+1-555-0123","attempt_number":1}

[2026-02-04 14:30:16] INFO: ✓ Webhook processing completed successfully 
{"quil_meeting_id":89,"processing_status":"matched","processing_time_ms":857.32,"matched_user":"John Doe","assets_available":{"transcription":true,"recording":true,"action_items":false,"notes_count":3}}
```

### Performance Monitoring:

**Tracked Metrics:**
- **Processing Time**: Measured for every webhook (milliseconds)
- **Performance Warnings**: Automatic warnings for processing >2000ms
- **Asset Availability**: Tracked per meeting (transcription, recording, notes, action items)
- **Match Rate**: Success rate of phone number matching
- **Duplicate Rate**: Idempotency check hits
- **Error Rate**: Failed processing attempts

**Performance Optimization:**
- Middleware logs request/response without blocking processing
- Large payloads automatically truncated (>50KB)
- Async activity log creation with error isolation
- Database queries optimized for phone matching

### Error Tracking & Alerting:

**Error Categories:**
1. **Validation Errors**: Invalid webhook payload structure
2. **Processing Errors**: Database, matching, or activity creation failures
3. **Performance Issues**: Slow processing times
4. **Duplicate Webhooks**: Idempotency violations (informational)

**Error Information Logged:**
- Error message and type
- File and line number
- Stack trace (debug level)
- Request payload that caused error
- Processing time before failure
- Request correlation ID

### Security & Compliance:

**Data Protection:**
- Sensitive headers automatically redacted
- API keys, authorization tokens never logged
- Cookie data stripped from logs
- Large payloads summarized to prevent log bloat

**Audit Trail:**
- Complete record of all webhook interactions
- Request correlation for troubleshooting
- Processing status tracked end-to-end
- Activity creation tied to webhook events

**Compliance Features:**
- 30-day log retention for audit purposes
- Structured JSON logging for parsing/analysis
- Timestamp precision for forensics
- Request ID for tracing through system

### Troubleshooting Guide:

**Common Scenarios:**

1. **Webhook Not Processing:**
   ```bash
   php artisan quil:logs --level=error --lines=100
   ```
   Look for validation errors or processing failures.

2. **Phone Number Not Matching:**
   ```bash
   php artisan quil:logs --filter="Phone match" --today
   ```
   Check phone matching attempts and patterns used.

3. **Slow Processing:**
   ```bash
   php artisan quil:logs --filter="Slow webhook" --today
   ```
   Identify performance bottlenecks.

4. **Duplicate Webhooks:**
   ```bash
   php artisan quil:logs --filter="Duplicate" --today
   ```
   Verify idempotency is working correctly.

5. **Real-time Monitoring:**
   ```bash
   php artisan quil:logs --tail
   ```
   Watch webhooks as they arrive in production.

### Integration with Development Workflow:

**Local Development:**
- All logs visible in real-time with `--tail`
- Debug level enabled by default
- Full stack traces for troubleshooting

**Production:**
- Info level recommended
- Error alerts can be configured via log handlers
- Performance metrics tracked automatically
- 30-day retention for compliance

**Testing:**
- Test webhook payloads logged in full
- Easy verification of processing steps
- Request IDs simplify debugging

### Benefits of Logging System:

- **Debugging**: Quickly identify why webhooks fail
- **Monitoring**: Track processing times and success rates
- **Compliance**: Complete audit trail of webhook interactions
- **Performance**: Identify and optimize slow operations
- **Security**: Sensitive data automatically protected
- **Troubleshooting**: Request correlation simplifies issue tracking
- **Visibility**: Real-time monitoring of webhook activity
- **Analytics**: Structured logs enable metric extraction
- **Alerting**: Foundation for alert/notification systems

## Orchid Platform & Quil Webhook Fixes (Feb 2026)

### Orchid Relation Field Version Compatibility Issue

**Issue:** Inconsistent dropdown display showing "[object Object]" on production but correct names on local

**Root Cause:** Version mismatch between environments
- **Local:** Orchid Platform 14.23.1 → Updated to 14.52.5
- **Production:** Orchid Platform 14.52.4

**Technical Details:**
- Orchid's `Relation` field (used in JobEditLayout for Employer and Recruiter dropdowns) makes AJAX calls to `/platform/relation` endpoint
- RelationController returns data as key-value object: `{"1": "admin", "2": "HP Admin"}`
- JavaScript controller (`relation_controller.js`) transforms using `Object.entries()` for TomSelect dropdown
- Version differences can cause response format inconsistencies

**Solution:** Updated local environment to 14.52.5 to match production
- Fixed composer autoload hang by disabling optimize-autoloader temporarily
- Cleared all Laravel caches (cache, config, route, view)

**Files Involved:**
- `app/Orchid/Layouts/Job/JobEditLayout.php` - Uses `Relation::make()` field
- `vendor/orchid/platform/src/Platform/Http/Controllers/RelationController.php` - Returns relation data
- `vendor/orchid/platform/resources/js/controllers/relation_controller.js` - Transforms API response

### Quil Webhook CSRF and JSON Parsing Fixes

**Issues Fixed:**

1. **419 CSRF Error on Webhook Endpoint:**
   - **Problem:** Quil webhooks were being rejected with 419 status (CSRF token mismatch)
   - **Root Cause:** External webhooks don't include CSRF tokens
   - **Solution:** Excluded `/webhooks/*` routes from CSRF verification in `bootstrap/app.php`
   - **Implementation:** 
     ```php
     $middleware->validateCsrfTokens(except: ['webhooks/*']);
     ```
   - **Result:** Webhooks now publicly accessible without CSRF tokens while maintaining security logging

2. **JSON String Parsing Error in Database Notes:**
   - **Problem:** `foreach() argument must be of type array|object, string given` when viewing meeting details
   - **Root Cause:** Quil webhook sends `databaseNotes` and `followUpMaterials` as JSON strings, not arrays
   - **Error Locations:** 
     * Line 111 in `QuilMeeting::getSummary()` - foreach on string value
     * Line 220 in `QuilWebhookController` - count() on string value
     * Blade templates using count() and foreach without type safety
   
   - **Solutions Implemented:**
     * **QuilWebhookController.php:** Added JSON string decoding before saving to database
       ```php
       if (isset($assetsData['databaseNotes']) && is_string($assetsData['databaseNotes'])) {
           $assetsData['databaseNotes'] = json_decode($assetsData['databaseNotes'], true) ?? [];
       }
       ```
     * **QuilMeeting.php:** Added defensive JSON decoding in `getSummary()` method
     * **meeting-summary.blade.php:** Added `is_array()` check before count() and foreach
     * **meeting-assets.blade.php:** Added `is_array()` check before count() and foreach
     * **Webhook logging:** Changed count() to safely handle string values
   
   - **Result:** Webhooks process successfully, meeting detail pages display correctly, backward compatible with existing data

**Technical Implementation:**
- Quil API sends nested JSON as encoded strings: `"databaseNotes": "[{\"name\":\"Summary\",\"note\":\"...\"}]"`
- Added pre-processing to decode JSON strings before database insertion
- Model casting (`'database_notes' => 'array'`) now works correctly with properly formatted data
- Defensive programming throughout to handle both string and array formats
- Maintains backward compatibility with any existing malformed data

**Files Updated:**
- `bootstrap/app.php` - CSRF exception for webhooks
- `app/Http/Controllers/Api/QuilWebhookController.php` - JSON decoding and safe count()
- `app/Models/QuilMeeting.php` - Defensive JSON handling in getSummary()
- `resources/views/orchid/quil/meeting-summary.blade.php` - Type safety checks
- `resources/views/orchid/quil/meeting-assets.blade.php` - Type safety checks

**Recommendation:** Always validate webhook payload structure and decode JSON strings before database storage.